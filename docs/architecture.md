# 架构设计

## 系统框架
- 前端：Vue 3 + Vite（单页应用）。
- 后端：FastAPI（提供配置库/规则的读写与同步任务）。
- 数据库：PostgreSQL（JSONB 存储配置）。
- 数据层：前端读取运行时 JSON，后端负责持久化与同步。
- 部署：本地自用（后端 + 数据库 + 前端静态资源）。

## 系统形态
- 前后端分离，推荐逻辑在浏览器端执行。
- 后端提供配置管理与定时同步，便于数据更新。

## 目录结构
- `app/` Vue 前端工程（Vite）
- `app/public/data/` 运行时数据（配置库与规则）
- `data/` 数据源原始库（可维护版本）
- `backend/` FastAPI 后端与数据库配置
- `docs/` 需求与调研文档

## 数据流
1. 前端加载 `app/public/data/components.json` 与 `app/public/data/rules.json`。
2. 用户输入预算档位/场景/模式/显卡偏好。
3. 规则引擎计算预算分配与部件选择。
4. 输出配置清单、价格区间与说明。
5. 后端用于更新/同步配置数据并下发到前端。

## 关键模块
- 预算档位与场景权重：来自 `rules.json`。
- 部件筛选与匹配：价格接近度 + 兼容性规则。
- 兼容性校验：CPU/主板平台与内存代际匹配；电源功耗估算。
- 配置管理：后端 `config_store` 表（JSONB 存储）。
- 同步任务：定时爬取/导入（占位实现）。

## 管理后台
- 目标：可视化维护配件库与规则库。
- 入口：独立管理端（后续接入），复用后端接口。

## 维护策略
- 配件库：以 JSON 维护，允许定期更新价格区间。
- 规则：以 JSON 维护，允许调整场景权重与模式偏好。
